<% 
layout('../boilerplate');
script('//maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&libraries=drawing');
script('/js/jquery.fullscreen-min.js');
script('/js/new_edit_places.js');
-%>
<div class="container" id="admin">
	<div class="row">
		<div class="col-xs-12 col-sm-12 col-md-12">
			<% for(k in error_msg) { %>
				<div class="alert alert-danger alert-dismissable">
					<button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
					<strong>Error!</strong> <%= error_msg[k] %>
				</div>
			<% } %>
			<div class="panel panel-default">
				<!-- Default panel contents -->
				<div class="panel-heading">
					Editing
				</div>

				<form role="form" acton="<%=form_action%>" method="post">
					<div class="panel-body">

							<div class="form-group<%=(validation.name)?' has-error':''%>">
								<label class="control-label" for="name">Name</label>
								<%-input({
									type: 'text',
									id: 'name',
									name: 'name',
									placeholder: 'Name',
									value: item.name,
									class: 'form-control',
									required: true
								})%>
							</div>

							<div class="form-group<%=(validation.name)?' has-error':''%>">
								<label class="control-label" for="name">Image</label>
								<%-input({
									type: 'text',
									id: 'image',
									name: 'image',
									placeholder: 'Image',
									value: item.image,
									class: 'form-control',
									required: true
								})%>
							</div>

							<div class="form-group<%=(validation.name)?' has-error':''%>">
								<label class="control-label" for="name">Description</label>
								<textarea name="description" id="description" class="form-control" rows="3" required><%=item.description%></textarea>
							</div>

							<!-- Location Field -->
							<input type="hidden" name="location[type]" id="type" value="<%=(item.location)?item.location.type:''%>">
							<input type="hidden" name="location[coordinates]" id="coordinates" value="<%=((item.location)?JSON.stringify(item.location.coordinates):'')%>">

							<script>
								var place = <%-(item.location)?JSON.stringify(item.location):'""'%>;
							</script>

							<div class="form-group<%=(validation.location)?' has-error':''%>">
								<label class="control-label" for="name">Coordinates</label>
								<div id="location" class="gmap form-control"></div>
							</div>
							<!-- /Location Field -->


					</div>

					<div class="panel-footer">
						<button type="submit" class="btn btn-default">Submit</button>
					</div>

				</form>
			</div><!--/.panel .panel-default -->
		</div>
	</div><!--/.row -->
</div>
